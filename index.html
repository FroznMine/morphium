<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Morphium : Morphium - Java Object Mapper and Caching Layer for MongoDB" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-30545452-2']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
    <title>Morphium</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/sboesebeck/morphium">View on GitHub</a>

          <h1 id="project_title">Morphium</h1>
          <h2 id="project_tagline">Morphium - Java Object Mapper and Caching Layer for MongoDB</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/sboesebeck/morphium/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/sboesebeck/morphium/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a name="morphium" class="anchor" href="#morphium"><span class="octicon octicon-link"></span></a>morphium</h1>

<p>Morphium - Java Object Mapper and Caching Layer for MongoDB</p>

<p>Morphium is a POJO Object mapper for Accessing Mongodb. Some of the main Features of Morphium:</p>

<ul>
<li>actively developed</li>
<li>used by a number of projects (including holidayinsider.com)</li>
<li>Transparent access to mongo db</li>
<li>Transparent declarative (Annotation based) caching</li>
<li>Annotation based definition of mappings</li>
<li>Cluster Awareness</li>
<li>Cache synchronization between cluster nodes</li>
<li>Asynchronous and Buffered write access</li>
<li>Messageing</li>
<li>fluent interface for querying mongodb</li>
<li>support for the mongodb aggrgator framework</li>
<li>support for complex queries</li>
<li>support inheritence and polymorphism</li>
<li>support for javax.validation annotations</li>
<li>lifecycle method of pojos</li>
<li>nearly every aspect of morphium can be replaced by own implementation (e.g. Query-Object, CacheImplementation...)</li>
<li>ConfigManager helps storing app configurations in Mongo with efficient access to it (cached)</li>
<li>Spport for References, including lazy loaded references</li>
<li>Support for partial updated objects (when writing, only the changes of the object are transferred)</li>
</ul><h1>
<a name="quick-start" class="anchor" href="#quick-start"><span class="octicon octicon-link"></span></a>Quick Start</h1>

<p>before accessing mongo via morphium, you need to configure morphium. this is done by preparing a MorphiumConfig Object:</p>

<div class="highlight"><pre>  <span class="n">MorphiumConfig</span> <span class="n">cfg</span> <span class="o">=</span> <span class="k">new</span> <span class="n">MorphiumConfig</span><span class="o">();</span>
  <span class="n">cfg</span><span class="o">.</span><span class="na">setDatabase</span><span class="o">(</span><span class="s">"testdb"</span><span class="o">);</span>
  <span class="n">cfg</span><span class="o">.</span><span class="na">addHost</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">27017</span><span class="o">);</span>
</pre></div>

<p>you can also configure morphium using properties: new MorphiumConfig(properties); or a json-String: MorphiumConfig cfg = MorphiumConfig.createFromJson(json);</p>

<p>After that, you just need to instancieate morphium:</p>

<pre><code>  Morphium m=new Morphium(cfg);
</code></pre>

<p>then you are good to go:</p>

<div class="highlight"><pre>  <span class="n">Query</span><span class="o">&lt;</span><span class="n">MyEntity</span><span class="o">&gt;</span> <span class="n">q</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="na">createQueryFor</span><span class="o">(</span><span class="n">MyEntity</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">f</span><span class="o">(</span><span class="s">"a_field"</span><span class="o">).</span><span class="na">eq</span><span class="o">(</span><span class="s">"a value"</span><span class="o">);</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="n">MyEntity</span><span class="o">&gt;</span> <span class="n">lst</span><span class="o">=</span><span class="n">q</span><span class="o">.</span><span class="na">asList</span><span class="o">();</span>
  <span class="n">MyEntity</span> <span class="n">ent</span><span class="o">=</span><span class="n">q</span><span class="o">.</span><span class="na">get</span><span class="o">();</span>
  <span class="o">...</span>
  <span class="n">m</span><span class="o">.</span><span class="na">store</span><span class="o">(</span><span class="n">ent</span><span class="o">);</span>
</pre></div>

<p>Defining an Entity is quite simple as well:</p>

<div class="highlight"><pre>  <span class="nd">@Entity</span><span class="o">(</span><span class="n">translateCamelCase</span> <span class="o">=</span> <span class="kc">true</span><span class="o">)</span>
  <span class="nd">@Cache</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyEntity</span> <span class="o">{</span>
    <span class="nd">@Id</span>
    <span class="kd">private</span> <span class="n">ObjectId</span> <span class="n">myId</span><span class="o">;</span> 

    <span class="kd">private</span> <span class="n">String</span> <span class="n">aField</span><span class="o">;</span>

    <span class="kd">private</span> <span class="n">EmbeddedObject</span> <span class="n">emb</span><span class="o">;</span>

    <span class="nd">@Reference</span>
    <span class="kd">private</span> <span class="n">MyEntity</span> <span class="n">otherEntity</span><span class="o">;</span>

   <span class="o">...</span>
  <span class="o">}</span>

  <span class="nd">@Embedded</span>
  <span class="kd">public</span> <span class="kd">class</span> <span class="nc">EmbeddedObject</span> <span class="o">{</span>
   <span class="o">...</span>
  <span class="o">}</span>
</pre></div>

<p>All entities need to have an <a href="https://github.com/Id" class="user-mention">@Id</a> field. If the type is org.bson.types.ObjectId, it will be created by mongo, if not - you need to take care of that.
References only work to other entities (of course).
You can also use Maps, Lists or Arrays, all may also include other Entities or Embedded types.</p>

<p>This is a very short glance at all the features of Morphium!</p>

<p>For more information take a closer look at <a href="http://code.google.com/p/morphium">http://code.google.com/p/morphium</a></p>

<p>Have fun,</p>

<p>Stephan</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Morphium maintained by <a href="https://github.com/sboesebeck">sboesebeck</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
